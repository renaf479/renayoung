"use strict";function _openWorkModal(){var e=this.dataset.slug,t="/works/"+e;workModalIframe.src=t,workModalIframe.onload=function(){Avgrund.show(".work__modal")}}function _closeWorkModal(){Avgrund.hide(".work__modal")}function _openContactModal(){"mobile"===breakpoint.value?window.open(contactModalIframeNode.dataset.src,"_blank"):Avgrund.show(".contact__modal")}function _closeContactModal(){Avgrund.hide(".contact__modal")}function _loaderCleanup(){loaderWrapper.classList.add("hidden--animated"),document.body.classList.remove("loading"),setTimeout(function(){document.body.removeChild(loaderWrapper)},1e3)}function _loaderComplete(){window.scrollTo(0,0),"mobile"===breakpoint.value?_loaderCleanup():(contactModalIframeNode.src=contactModalIframeNode.dataset.src,contactModalIframeNode.onload=function(){_loaderCleanup()})}var Avgrund=function(){function e(e){27===e.keyCode&&o()}function t(e){e.target===d&&o()}function n(n){document.addEventListener("keyup",e,!1),document.addEventListener("click",t,!1),document.addEventListener("touchstart",t,!1),c.classList.remove(l),c.classList.add("no-transition"),n&&c.classList.add(n),setTimeout(function(){c.classList.remove("no-transition"),s.classList.add("avgrund-active")},0),l=n}function o(){document.removeEventListener("keyup",e,!1),document.removeEventListener("click",t,!1),document.removeEventListener("touchstart",t,!1),s.classList.remove("avgrund-active"),c.classList.remove("avgrund-popup-animate")}function a(){document.documentElement.classList.add("no-blur")}function i(e){return c=document.querySelector(e),c.classList.add("avgrund-popup-animate"),n(),this}function r(){o()}var s=document.documentElement,c=document.querySelector(".avgrund-popup-animate"),d=document.querySelector(".avgrund-cover"),l=null;return s.classList.add("avgrund-ready"),{activate:n,deactivate:o,disableBlur:a,show:i,hide:r}}(),Meny={create:function(e){return function(){function t(e){Meny.extend(z,e),n(),o(),a(),i(),r(),s()}function n(){switch(k="",N="",z.position){case B:M="50% 0%",x="rotateX( 30deg ) translateY( -100% ) translateY( "+z.overlap+"px )",C="50% 0",W="translateY( "+z.height+"px ) rotateX( -15deg )",_={top:"-"+(z.height-z.overlap)+"px"},L={top:"0px"},I={top:"0px"},T={top:z.height+"px"};break;case O:M="100% 50%",x="rotateY( 30deg ) translateX( 100% ) translateX( -2px ) scale( 1.01 )",C="100% 50%",W="translateX( -"+z.width+"px ) rotateY( -15deg )",_={right:"-"+(z.width-z.overlap)+"px"},L={right:"0px"},I={left:"0px"},T={left:"-"+z.width+"px"};break;case A:M="50% 100%",x="rotateX( -30deg ) translateY( 100% ) translateY( -"+z.overlap+"px )",C="50% 100%",W="translateY( -"+z.height+"px ) rotateX( 15deg )",_={bottom:"-"+(z.height-z.overlap)+"px"},L={bottom:"0px"},I={top:"0px"},T={top:"-"+z.height+"px"};break;default:M="100% 50%",x="translateX( -100% ) translateX( "+z.overlap+"px ) scale( 1.01 ) rotateY( -30deg )",C="0 50%",W="translateX( "+z.width+"px ) rotateY( 15deg )",_={left:"-"+(z.width-z.overlap)+"px"},L={left:"0px"},I={left:"0px"},T={left:z.width+"px"}}}function o(){Meny.addClass(P.wrapper,"meny-"+z.position),G.wrapper=P.wrapper.style.cssText,P.wrapper.style[Meny.prefix("perspective")]="800px",P.wrapper.style[Meny.prefix("perspectiveOrigin")]=C}function a(){P.cover&&P.cover.parentNode.removeChild(P.cover),P.cover=document.createElement("div"),P.cover.style.position="absolute",P.cover.style.display="block",P.cover.style.width="100%",P.cover.style.height="100%",P.cover.style.left=0,P.cover.style.top=0,P.cover.style.zIndex=1e3,P.cover.style.visibility="hidden",P.cover.style.opacity=0;try{P.cover.style.background="rgba( 0, 0, 0, 0.4 )",P.cover.style.background="-ms-linear-gradient("+z.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)",P.cover.style.background="-moz-linear-gradient("+z.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)",P.cover.style.background="-webkit-linear-gradient("+z.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)"}catch(e){}q&&(P.cover.style[Meny.prefix("transition")]="all "+z.transitionDuration+" "+z.transitionEasing),P.contents.appendChild(P.cover)}function i(){var e=P.menu.style;switch(z.position){case B:e.width="100%",e.height=z.height+"px";break;case O:e.right="0",e.width=z.width+"px",e.height="100%";break;case A:e.bottom="0",e.width="100%",e.height=z.height+"px";break;case S:e.width=z.width+"px",e.height="100%"}G.menu=e.cssText,e.position="fixed",e.display="block",e.zIndex=1,q?(e[Meny.prefix("transform")]=x,e[Meny.prefix("transformOrigin")]=M,e[Meny.prefix("transition")]="all "+z.transitionDuration+" "+z.transitionEasing):Meny.extend(e,_)}function r(){var e=P.contents.style;G.contents=e.cssText,q?(e[Meny.prefix("transform")]=N,e[Meny.prefix("transformOrigin")]=C,e[Meny.prefix("transition")]="all "+z.transitionDuration+" "+z.transitionEasing):(e.position=e.position.match(/relative|absolute|fixed/gi)?e.position:"relative",Meny.extend(e,I))}function s(){"ontouchstart"in window&&(z.touch?(Meny.bindEvent(document,"touchstart",v),Meny.bindEvent(document,"touchend",f)):(Meny.unbindEvent(document,"touchstart",v),Meny.unbindEvent(document,"touchend",f))),z.mouse?(Meny.bindEvent(document,"mousedown",u),Meny.bindEvent(document,"mouseup",m),Meny.bindEvent(document,"mousemove",p)):(Meny.unbindEvent(document,"mousedown",u),Meny.unbindEvent(document,"mouseup",m),Meny.unbindEvent(document,"mousemove",p))}function c(){$||($=!0,Meny.addClass(P.wrapper,"meny-active"),P.cover.style.height=P.contents.scrollHeight+"px",P.cover.style.visibility="visible",q?(Meny.bindEventOnce(P.wrapper,"transitionend",function(){Meny.dispatchEvent(P.menu,"opened")}),P.cover.style.opacity=1,P.contents.style[Meny.prefix("transform")]=W,P.menu.style[Meny.prefix("transform")]=k):(Y&&Y.stop(),Y=Meny.animate(P.menu,L,500),X&&X.stop(),X=Meny.animate(P.contents,T,500),D&&D.stop(),D=Meny.animate(P.cover,{opacity:1},500)),Meny.dispatchEvent(P.menu,"open"))}function d(){$&&($=!1,Meny.removeClass(P.wrapper,"meny-active"),q?(Meny.bindEventOnce(P.wrapper,"transitionend",function(){Meny.dispatchEvent(P.menu,"closed")}),P.cover.style.visibility="hidden",P.cover.style.opacity=0,P.contents.style[Meny.prefix("transform")]=N,P.menu.style[Meny.prefix("transform")]=x):(Y&&Y.stop(),Y=Meny.animate(P.menu,_,500),X&&X.stop(),X=Meny.animate(P.contents,I,500),D&&D.stop(),D=Meny.animate(P.cover,{opacity:0},500,function(){P.cover.style.visibility="hidden",Meny.dispatchEvent(P.menu,"closed")})),Meny.dispatchEvent(P.menu,"close"))}function l(){P.wrapper.style.cssText=G.wrapper,P.menu.style.cssText=G.menu,P.contents.style.cssText=G.contents,P.cover&&P.cover.parentNode&&P.cover.parentNode.removeChild(P.cover),Meny.unbindEvent(document,"touchstart",v),Meny.unbindEvent(document,"touchend",f),Meny.unbindEvent(document,"mousedown",u),Meny.unbindEvent(document,"mouseup",m),Meny.unbindEvent(document,"mousemove",p);for(var e in J)this.removeEventListener(J[e][0],J[e][1]);J=[]}function u(e){j=!0}function p(e){if(!j){var t=e.clientX-H,n=e.clientY-V;switch(z.position){case B:n>z.height?d():n<z.threshold&&c();break;case O:var o=P.wrapper.offsetWidth;t<o-z.width?d():t>o-z.threshold&&c();break;case A:var a=P.wrapper.offsetHeight;n<a-z.height?d():n>a-z.threshold&&c();break;case S:t>z.width?d():t<z.threshold&&c()}}}function m(e){j=!1}function v(e){F=e.touches[0].clientX-H,Q=e.touches[0].clientY-V,U=null,Z=null,Meny.bindEvent(document,"touchmove",h)}function h(e){U=e.touches[0].clientX-H,Z=e.touches[0].clientY-V;var t=null;Math.abs(U-F)>Math.abs(Z-Q)?U<F-z.threshold?t=b:U>F+z.threshold&&(t=g):Z<Q-z.threshold?t=w:Z>Q+z.threshold&&(t=E),t&&t()&&e.preventDefault()}function f(e){Meny.unbindEvent(document,"touchmove",h),null===U&&null===Z&&y()}function y(){var e=z.position===B&&Q>z.height||z.position===O&&F<P.wrapper.offsetWidth-z.width||z.position===A&&Q<P.wrapper.offsetHeight-z.height||z.position===S&&F>z.width;e&&d()}function g(){return z.position===O&&$?(d(),!0):z.position!==S||$?void 0:(c(),!0)}function b(){return z.position!==O||$?z.position===S&&$?(d(),!0):void 0:(c(),!0)}function E(){return z.position===A&&$?(d(),!0):z.position!==B||$?void 0:(c(),!0)}function w(){return z.position!==A||$?z.position===B&&$?(d(),!0):void 0:(c(),!0)}if(!e||!e.menuElement||!e.contentsElement)throw"You need to specify which menu and contents elements to use.";if(e.menuElement.parentNode!==e.contentsElement.parentNode)throw"The menu and contents elements must have the same parent.";var M,x,k,_,L,C,N,W,I,T,Y,X,D,B="top",O="right",A="bottom",S="left",q="WebkitPerspective"in document.body.style||"MozPerspective"in document.body.style||"msPerspective"in document.body.style||"OPerspective"in document.body.style||"perspective"in document.body.style,z={width:300,height:300,position:S,threshold:40,overlap:6,transitionDuration:"0.5s",transitionEasing:"ease",mouse:!0,touch:!0},P={menu:e.menuElement,contents:e.contentsElement,wrapper:e.menuElement.parentNode,cover:null},H=P.wrapper.offsetLeft,V=P.wrapper.offsetTop,F=null,Q=null,U=null,Z=null,$=!1,j=!1,G={},J=[];return t(e),{configure:t,open:c,close:d,destroy:l,isOpen:function(){return $},addEventListener:function(e,t){J.push([e,t]),P.menu&&Meny.bindEvent(P.menu,e,t)},removeEventListener:function(e,t){P.menu&&Meny.unbindEvent(P.menu,e,t)}}}()},animate:function(e,t,n,o){return function(){function a(){var t=1-Math.pow(1-(Date.now()-d)/n,5);for(var s in r){var l=r[s];e.style[s]=l.start+(l.end-l.start)*t+l.unit}t<1?c=setTimeout(a,1e3/60):(o&&o(),i())}function i(){clearTimeout(c)}var r={};for(var s in t)r[s]={start:parseFloat(e.style[s])||0,end:parseFloat(t[s]),unit:"string"==typeof t[s]&&t[s].match(/px|em|%/gi)?t[s].match(/px|em|%/gi)[0]:""};var c,d=Date.now();return a(),{stop:i}}()},extend:function(e,t){for(var n in t)e[n]=t[n]},prefix:function(e,t){for(var n=e.slice(0,1).toUpperCase()+e.slice(1),o=["Webkit","Moz","O","ms"],a=0,i=o.length;a<i;a++){var r=o[a];if("undefined"!=typeof(t||document.body).style[r+n])return r+n}return e},addClass:function(e,t){e.className=e.className.replace(/\s+$/gi,"")+" "+t},removeClass:function(e,t){e.className=e.className.replace(t,"")},bindEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unbindEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},bindEventOnce:function(e,t,n){var o=this,a=function a(){o.unbindEvent(e,t,a),n.apply(this,arguments)};this.bindEvent(e,t,a)},dispatchEvent:function(e,t,n){if(e){var o=document.createEvent("HTMLEvents",1,2);o.initEvent(t,!0,!0),Meny.extend(o,n),e.dispatchEvent(o)}},getQuery:function(){var e={};return location.search.replace(/[A-Z0-9]+?=([\w|:|\/\.]*)/gi,function(t){e[t.split("=").shift()]=t.split("=").pop()}),e}};"function"!=typeof Date.now&&(Date.now=function(){return(new Date).getTime()});var worksWrapper=document.querySelector(".works"),contactWrapper=document.querySelector(".contact__cta"),workModalWrapper=document.getElementById("work__modal"),contactModalWrapper=document.getElementById("contact__modal"),contactModalIframeNode=document.getElementById("contact__modal__iframe"),loaderWrapper=document.getElementById("loader"),loaderCallbackNode=document.getElementById("loader__callback"),workNodes=worksWrapper.getElementsByClassName("timeline__item__svg"),workModalIframe=workModalWrapper.getElementsByClassName("single__iframe")[0],breakpoint={};breakpoint.refreshValue=function(){this.value=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/\"/g,"")},Array.from(workNodes).forEach(function(e){e.addEventListener("mouseup",_openWorkModal)}),document.addEventListener("DOMContentLoaded",function(){document.body.classList.add("loading"),(window.onresize=function(){breakpoint.refreshValue()})(),contactWrapper.addEventListener("mouseup",_openContactModal),workModalWrapper.getElementsByClassName("modal__close")[0].addEventListener("mouseup",_closeWorkModal),contactModalWrapper.getElementsByClassName("modal__close")[0].addEventListener("mouseup",_closeContactModal),loaderCallbackNode.addEventListener("webkitAnimationEnd",_loaderComplete,!1),loaderCallbackNode.addEventListener("animationend",_loaderComplete,!1),loaderCallbackNode.addEventListener("oanimationend",_loaderComplete,!1)});
